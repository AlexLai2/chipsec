<?xml version="1.0"?>
<configuration platform="JVL">
<!--
XML configuration file for Jacobsville based platforms
-->
<!--
# *********************************************************
#
#                   PRE-RELEASE NOTICE
#
#    This software specifically enables pre-production
#    hardware provided by Intel Corporation.  The terms
#    describing your rights and responsibilities to use
#    such hardware are covered by a separate evaluation
#    agreement.  Of specific note in that agreement is
#    the requirement that you do not release or publish
#    information on the hardware without the specific
#    written authorization of Intel Corporation.
#
#    Intel Corporation requests that you do not release,
#    publish, or distribute this software until you are
#    specifically authorized.  These terms are deleted
#    upon publication of this software.
#
# *********************************************************

CHIPSEC: Platform Security Assessment Framework
Copyright (c) 2019-2020, Intel Corporation

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; Version 2.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Contact information:
chipsec@intel.com
-->

  <!-- #################################### -->
  <!--                                      -->
  <!-- Memory Mapped I/O spaces (MMIO BARs) -->
  <!--                                      -->
  <!-- #################################### -->

  <!-- #################################### -->
  <!--                                      -->
  <!-- Configuration registers              -->
  <!--                                      -->
  <!-- #################################### -->
  <registers>

    <!-- PCH SPIBAR registers -->
    <register name="HSFS" type="mmio" bar="SPIBAR" offset="0x4" size="4" desc="Hardware Sequencing Flash Status Register">
      <field name="FDONE"   bit="0"  size="1" desc="Flash Cycle Done"/>
      <field name="FCERR"   bit="1"  size="1" desc="Flash Cycle Error"/>
      <field name="AEL"     bit="2"  size="1" desc="Access Error Log"/>
      <field name="SCIP"    bit="5"  size="1" desc="SPI cycle in progress"/>
      <field name="WRSDIS"  bit="11" size="1" desc="Write status disable"/>
      <field name="PR34LKD" bit="12" size="1" desc="PRR3 PRR4 Lock-Down"/>
      <field name="FDOPSS"  bit="13" size="1" desc="Flash Descriptor Override Pin-Strap Status"/>
      <field name="FDV"     bit="14" size="1" desc="Flash Descriptor Valid"/>
      <field name="FLOCKDN" bit="15" size="1" desc="Flash Configuration Lock-Down"/>
      <field name="FGO"     bit="16" size="1" desc="Flash cycle go"/>
      <field name="FCYCLE"  bit="17" size="4" desc="Flash Cycle Type"/>
      <field name="WET"     bit="21" size="1" desc="Write Enable Type"/>
      <field name="FDBC"    bit="24" size="6" desc="Flash Data Byte Count"/>
      <field name="FSMIE"   bit="31" size="1" desc="Flash SPI SMI# Enable"/>
    </register>

    <!-- DCI registers -->
    <register name="ECTRL" type="mm_msgbus" port="0xB8" offset="0x4" size="4" desc="DCI Control Register">
      <field name="LOCK" bit="0" size="1"/>
      <field name="ENABLE" bit="4" size="1"/>
      <field name="AVAILABLE" bit="8" size="1"/>
    </register>

    <register name="PLKCTL" type="pcicfg" device="SMBHR" offset="0xEA" size="2" desc="Personality Lock Key Control Register">
      <field name="CL" bit="0" size="1" desc="Capability Lock"/>
    </register>

    <register name="MISCCTRLSTS0_0.4.0" type="mmcfg" device="_MISCCTRLSTS0_0.4.0" offset="0x188" size="4" desc="MISC Control and Status Register 0">
      <field name="inbound_configuration_enable" bit="1" size="1" desc="Enable Inbound Configuration Requests"/>
    </register>

    <register name="MISCCTRLSTS0_0.5.0" type="mmcfg" device="_MISCCTRLSTS0_0.5.0" offset="0x188" size="4" desc="MISC Control and Status Register 0">
      <field name="inbound_configuration_enable" bit="1" size="1" desc="Enable Inbound Configuration Requests"/>
    </register>

    <register name="MISCCTRLSTS0_0.6.0" type="mmcfg" device="_MISCCTRLSTS0_0.6.0" offset="0x188" size="4" desc="MISC Control and Status Register 0">
      <field name="inbound_configuration_enable" bit="1" size="1" desc="Enable Inbound Configuration Requests"/>
    </register>

    <register name="MISCCTRLSTS0_0.7.0" type="mmcfg" device="_MISCCTRLSTS0_0.7.0" offset="0x188" size="4" desc="MISC Control and Status Register 0">
      <field name="inbound_configuration_enable" bit="1" size="1" desc="Enable Inbound Configuration Requests"/>
    </register>

    <!-- MSR Definitions -->
    <register name="MSR_BIOS_DONE" type="msr" msr="0x151" desc="BIOS Done Status">
      <field name="IA_UNTRUSTED" bit="0" size="1" desc="Untrusted mode enable bit"/>
    </register>

    <register name="MSR_PKG_CST_CONFIG_CONTROL" type="msr" msr="0xE2" desc="C-State Configuration Register">
      <field name="LOCK" bit="15"  size="1"  desc="Lock MSR_PKG_CST_CONFIG_CONTROL register" />
    </register>

    <!-- Undefined Registers -->
    <register name="LT_LOCK_MEMORY" undef="Not defined for platform"/>
  </registers>

  <controls>
    <!-- Undefined Controls -->
    <control name="ConfigLock" undef="Not defined for platform"/>
  </controls>

</configuration>

