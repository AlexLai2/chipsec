<?xml version="1.0"?>
<configuration platform="AML" >
<!--
XML configuration file for Amber Lake
-->
<!--
# *********************************************************
#
#                   PRE-RELEASE NOTICE
#
#    This software specifically enables pre-production
#    hardware provided by Intel Corporation.  The terms
#    describing your rights and responsibilities to use
#    such hardware are covered by a separate evaluation
#    agreement.  Of specific note in that agreement is
#    the requirement that you do not release or publish
#    information on the hardware without the specific
#    written authorization of Intel Corporation.
#
#    Intel Corporation requests that you do not release,
#    publish, or distribute this software until you are
#    specifically authorized.  These terms are deleted
#    upon publication of this software.
#
# *********************************************************

CHIPSEC: Platform Security Assessment Framework
Copyright (c) 2019, Intel Corporation

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; Version 2.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Contact information:
chipsec@intel.com
-->
    <!-- #################################### -->
    <!--                                      -->
    <!-- Configuration registers              -->
    <!--                                      -->
    <!-- #################################### -->
    <registers>
        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <!-- PCI CFG registers            -->
        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <register name="PCI0.0.0_GGC" type="pcicfg" bus="0" dev="0" fun="0" offset="0x50" size="2" desc="Graphics Control">
            <field name="GMS"     bit="8" size="8" desc="GMS" />
            <field name="GGMS"    bit="6" size="2" desc="GGMS" />
            <field name="VAMEN"   bit="2" size="1" desc="VAMEN" />
            <field name="IVD"     bit="1" size="1" desc="IVD" />
            <field name="GGCLOCK" bit="0" size="1" desc="GGC Lock"/>
        </register>
        <register name="PCI0.0.0_PAVPC" type="pcicfg" bus="0" dev="0" fun="0" offset="0x58" size="4" desc="PAVP Control">
            <field name="PCMBASE" bit="20" size="12" desc="PCMBASE" />
            <field name="WOPCM" bit="7" size="2" desc="WOPCM Size" />
            <field name="ASMFEN" bit="6" size="1" desc="ASMF Method Enable" />
            <field name="OVTATTACK" bit="4" size="1" desc="Override Unsolicited Connection State Attack and Terminate" />
            <field name="PAVPLCK" bit="2" size="1" desc="PAVP Lock" />
            <field name="PAVPE" bit="1" size="1" desc="PAVP Enable" />
            <field name="PCME" bit="0" size="1" desc="PCM Enable" />
        </register>
        <register name="PCI0.0.0_DPR" type="pcicfg" bus="0" dev="0" fun="0" offset="0x5C" size="4" desc="DMA Protected Region">
            <field name="TOPOFDPR" bit="20" size="12" desc="Top of DPR" />
            <field name="DPRSIZE" bit="4" size="8" desc="DPR Size" />
            <field name="EPM" bit="2" size="1" desc="DPR Enable" />
            <field name="PRS" bit="1" size="1" desc="DPR Status" />
            <field name="LOCK" bit="0" size="1" desc="DPR Lock" />
        </register>
        <register name="PCI0.0.0_BDSM" type="pcicfg" bus="0" dev="0" fun="0" offset="0xB0" size="4" desc="Base of Graphics Stolen Memory">
            <field name="BDSM" bit="20" size="12" desc="DSM Base" />
            <field name="LOCK" bit="0"  size="1"  desc="Lock" />
        </register>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <!-- MMIO registers               -->
        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <register name="IGD_CONFIG_0" type="mmio" bar="GTTMMADR" offset="0x0D00" size="4" desc="Config Register for RPM Unit">
            <field name="DISABLE_TSC_SYNC" bit="0" size="1" desc="TSC synchronization disable" />
            <field name="ICB" bit="1" size="3" desc="Workaround enable bits" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_BASE_0" type="mmio" bar="GTTMMADR" offset="0x4150" size="4" desc="Config Access Range Register 0 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_0" type="mmio" bar="GTTMMADR" offset="0x4154" size="4" desc="Config Access Range Register 0 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_1" type="mmio" bar="GTTMMADR" offset="0x4158" size="4" desc="Config Access Range Register 1 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_1" type="mmio" bar="GTTMMADR" offset="0x415C" size="4" desc="Config Access Range Register 1 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_2" type="mmio" bar="GTTMMADR" offset="0x4160" size="4" desc="Config Access Range Register 2 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_2" type="mmio" bar="GTTMMADR" offset="0x4164" size="4" desc="Config Access Range Register 2 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_3" type="mmio" bar="GTTMMADR" offset="0x4168" size="4" desc="Config Access Range Register 3 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_3" type="mmio" bar="GTTMMADR" offset="0x416C" size="4" desc="Config Access Range Register 3 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_4" type="mmio" bar="GTTMMADR" offset="0x4170" size="4" desc="Config Access Range Register 4 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_4" type="mmio" bar="GTTMMADR" offset="0x4174" size="4" desc="Config Access Range Register 4 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_5" type="mmio" bar="GTTMMADR" offset="0x4178" size="4" desc="Config Access Range Register 5 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_5" type="mmio" bar="GTTMMADR" offset="0x417C" size="4" desc="Config Access Range Register 5 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_6" type="mmio" bar="GTTMMADR" offset="0x4180" size="4" desc="Config Access Range Register 6 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_6" type="mmio" bar="GTTMMADR" offset="0x4184" size="4" desc="Config Access Range Register 6 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="IGD_CARR_BASE_7" type="mmio" bar="GTTMMADR" offset="0x4188" size="4" desc="Config Access Range Register 7 Base">
            <field name="VALID" bit="0" size="1" desc="Register valid" />
            <field name="ACCESS" bit="1" size="1" desc="Access permissions" />
            <field name="BASE" bit="2" size="20" desc="Base address" />
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
        </register>
        <register name="IGD_CARR_LIMIT_7" type="mmio" bar="GTTMMADR" offset="0x418C" size="4" desc="Config Access Range Register 7 Limit">
            <field name="LOCK" bit="31" size="1" desc="Register lock" />
            <field name="LIMIT" bit="0" size="22" desc="Range limit" />
        </register>
        <register name="GT_FORCE_WAKE" type="mmio" bar="GTTMMADR" offset="0xA188" size="4" desc="GT Force Wake register">
            <field name="WAKE_MASK" bit="16" size="16" desc="GT thread wake mask" />
            <field name="WAKE_REQUEST" bit="0" size="16" desc="GT thread wake request" />
        </register>
        <register name="GTSP1" type="mmio" bar="GTTMMADR" offset="0x130044" size="4" desc="GT scratch pad 1">
            <field name="WAKE_REQUEST" bit="0" size="16" desc="GT thread wake request status" />
        </register>

        <!-- PCH SPIBAR registers -->
        <register name="HSFS" type="mmio" bar="SPIBAR" offset="0x04" size="4" desc="Hardware Sequencing Flash Status Register">
            <field name="FDONE"     bit="0"  size="1" desc="Flash Cycle Done"/>
            <field name="FCERR"     bit="1"  size="1" desc="Flash Cycle Error"/>
            <field name="AEL"       bit="2"  size="1" desc="Access Error Log"/>
            <field name="SAF_ERROR" bit="3"  size="1" desc="SAF Error"/>
            <field name="SAF_DLE"   bit="4"  size="1" desc="SAF Data Length Error"/>
            <field name="SCIP"      bit="5"  size="1" desc="SPI cycle in progress"/>
            <field name="WRSDIS"    bit="11" size="1" desc="Write status disable"/>
            <field name="PR34LKD"   bit="12" size="1" desc="PRR3 PRR4 Lock-Down"/>
            <field name="FDOPSS"    bit="13" size="1" desc="Flash Descriptor Override Pin-Strap Status"/>
            <field name="FDV"       bit="14" size="1" desc="Flash Descriptor Valid"/>
            <field name="FLOCKDN"   bit="15" size="1" desc="Flash Configuration Lock-Down"/>
            <field name="FGO"       bit="16" size="1" desc="Flash cycle go"/>
            <field name="FCYCLE"    bit="17" size="4" desc="Flash Cycle Type"/>
            <field name="WET"       bit="21" size="1" desc="Write Enable Type"/>
            <field name="FDBC"      bit="24" size="6" desc="Flash Data Byte Count"/>
            <field name="FSMIE"     bit="31" size="1" desc="Flash SPI SMI# Enable"/>
        </register>

        <!-- DCI registers -->
        <register name="ECTRL" type="mm_msgbus" port="0xB8" offset="0x0004" size="4" desc="DCI Control Register">
            <field name="LOCK" bit="0" size="1"/>
            <field name="ENABLE" bit="4" size="1"/>
            <field name="AVAILABLE" bit="8" size="1"/>
        </register>

        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <!--      Undefined Registers     -->
        <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <register name="GC" undef="Not defined for platform" />


    </registers>
</configuration>

